/*!
 * videojs-playlists - Playlists done right for Videojs
 * v0.2.0
 * 
 * copyright Antonio Laguna 2015
 * MIT License
*/
function playList(a,b){var c=this;c.pl=c.pl||{};var d=parseInt(a,10);c.pl._guessVideoType=function(a){var b={webm:"video/webm",mp4:"video/mp4",ogv:"video/ogg"},c=a.split(".").pop();return b[c]||""},c.pl.init=function(a,b){b=b||{},c.pl.videos=[],c.pl.current=0,c.on("ended",c.pl._videoEnd),b.getVideoSource&&(c.pl.getVideoSource=b.getVideoSource),c.pl._addVideos(a)},c.pl._updatePoster=function(a){c.poster(a),c.removeChild(c.posterImage),c.posterImage=c.addChild("posterImage")};var e=function(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)if(a[c]&&b[d]&&a[c].src===b[d].src)return!0;return!1};return c.pl._createVideoItem=function(a){for(var b=Object.create(a),d=[],e=0,f=b.src.length;f>e;e++)d.push({type:c.pl._guessVideoType(b.src[e]),src:b.src[e]});return b.src=d,b},c.pl._addVideos=function(a){for(var b=0,d=a.length;d>b;b++){var e=c.pl._createVideoItem(a[b]);c.pl.videos.push(e)}},c.pl._updateVideos=function(a){var b=c.pl.currentVideo,d=a.some(function(a,d){var f=c.pl._createVideoItem(a);return e(b.src,f.src)?(c.pl.current=d,!0):!1});d||c.pl.current>=a.length&&(c.pl.current=a.length-1),c.pl.videos=[],c.pl._addVideos(a)},c.pl._nextPrev=function(a){var b,d;if("next"===a?(b=c.pl.videos.length-1,d=1):(b=0,d=-1),c.pl.current!==b){var e=c.pl.current+d;c.pl._setVideo(e),c.trigger(a,[c.pl.videos[e]])}},c.pl._setVideo=function(a){a<c.pl.videos.length&&(c.pl.current=a,c.pl.currentVideo=c.pl.videos[a],c.paused()||c.pl._resumeVideo(),c.pl.getVideoSource?c.pl.getVideoSource(c.pl.videos[a],function(a,b){c.pl._setVideoSource(a,b)}):c.pl._setVideoSource(c.pl.videos[a].src,c.pl.videos[a].poster))},c.pl._setVideoSource=function(a,b){c.src(a),c.pl._updatePoster(b)},c.pl._resumeVideo=function(){c.one("loadstart",function(){c.play()})},c.pl._videoEnd=function(){c.pl.current===c.pl.videos.length-1?c.trigger("lastVideoEnded"):(c.pl._resumeVideo(),c.next())},a instanceof Array?(c.pl.init(a,b),c.pl._setVideo(0),c):d===d?(c.pl._setVideo(d),c):"string"==typeof a&&"undefined"!=typeof c.pl[a]?(c.pl[a].apply(c),c):void 0}videojs.Player.prototype.next=function(){return this.pl._nextPrev("next"),this},videojs.Player.prototype.prev=function(){return this.pl._nextPrev("prev"),this},videojs.Player.prototype.updatePlayList=function(a){return this.pl._updateVideos(a),this},videojs.plugin("playList",playList);